{
  "resourceType" : "Parameters",
  "id" : "RaMonitoringRecommendationParameters3",
  "parameter" : [{
    "name" : "subject",
    "valueString" : "Patient/Patient1"
  },
  {
    "name" : "practitioner",
    "valueString" : "Practitioner/Practitioner1"
  },
  {
    "name" : "encounter",
    "valueString" : "Encounter/Encounter1"
  },
  {
    "name" : "planDefinition",
    "resource" : {
      "resourceType" : "PlanDefinition",
      "id" : "RaMonitoringRecommendation",
      "meta" : {
        "profile" : ["http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-recommendationdefinition"]
      },
      "url" : "http://example.org/PlanDefinition/RaMonitoringRecommendation",
      "version" : "0.2.0",
      "name" : "RaMonitoringRecommendation",
      "title" : "PlanDefinition RaMonitoringRecommendation",
      "type" : {
        "coding" : [{
          "system" : "http://terminology.hl7.org/CodeSystem/plan-definition-type",
          "code" : "eca-rule"
        }]
      },
      "status" : "draft",
      "experimental" : true,
      "publisher" : "Example",
      "description" : "Monitoring tests for antirheumatic drug therapy for Ra.",
      "jurisdiction" : [{
        "coding" : [{
          "system" : "http://unstats.un.org/unsd/methods/m49/m49.htm",
          "code" : "001",
          "display" : "World"
        }]
      }],
      "library" : ["http://example.org/Library/RaMonitoringRecommendationLibrary|0.2.0"],
      "action" : [{
        "title" : "Order monitoring tests for antirheumatic drug therapy.",
        "description" : "Order monitoring tests for antirheumatic drug therapy.",
        "code" : [{
          "coding" : [{
            "system" : "http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process-cs",
            "code" : "diagnostic-testing"
          }]
        }],
        "condition" : [{
          "kind" : "applicability",
          "expression" : {
            "language" : "text/cql-identifier",
            "expression" : "Order monitoring tests if on RA treatment"
          }
        }],
        "input" : [{
          "type" : "Observation",
          "profile" : ["http://example.org/StructureDefinition/ActiveRaTreatmentFeature"]
        }],
        "definitionCanonical" : "http://example.org/ActivityDefinition/OrderServiceActivity|0.2.0"
      }]
    }
  },
  {
    "name" : "data",
    "resource" : {
      "resourceType" : "Bundle",
      "id" : "PatientTestBundle1",
      "type" : "collection",
      "entry" : [{
        "fullUrl" : "http://apply-processor/Patient/Patient1",
        "resource" : {
          "resourceType" : "Patient",
          "id" : "Patient1",
          "name" : [{
            "given" : ["Alice"]
          }]
        }
      },
      {
        "fullUrl" : "http://apply-processor/Encounter/Encounter1",
        "resource" : {
          "resourceType" : "Encounter",
          "id" : "Encounter1",
          "status" : "in-progress",
          "class" : {
            "system" : "http://terminology.hl7.org/CodeSystem/v3-ActCode",
            "code" : "AMB"
          },
          "subject" : {
            "reference" : "Patient/Patient1"
          },
          "participant" : [{
            "individual" : {
              "reference" : "Practitioner/Practitioner1"
            }
          }]
        }
      },
      {
        "fullUrl" : "http://apply-processor/Practitioner/Practitioner1",
        "resource" : {
          "resourceType" : "Practitioner",
          "id" : "Practitioner1",
          "name" : [{
            "given" : ["Michael"]
          }]
        }
      },
      {
        "fullUrl" : "http://apply-processor/PastMedicationRequest/PastMedicationRequest",
        "resource" : {
          "resourceType" : "MedicationRequest",
          "id" : "PastMedicationRequest",
          "status" : "active",
          "intent" : "order",
          "medicationCodeableConcept" : {
            "text" : "Some medication"
          },
          "subject" : {
            "reference" : "Patient/Patient1"
          },
          "authoredOn" : "2023-01-01"
        }
      },
      {
        "fullUrl" : "http://apply-processor/CurrentMedication/CurrentMedication",
        "resource" : {
          "resourceType" : "Medication",
          "id" : "CurrentMedication",
          "status" : "active"
        }
      },
      {
        "fullUrl" : "http://apply-processor/PastMedication/PastMedication",
        "resource" : {
          "resourceType" : "Medication",
          "id" : "PastMedication",
          "status" : "inactive",
          "form" : {
            "coding" : [{
              "system" : "http://snomed.info/sct",
              "code" : "pill",
              "display" : "Pill"
            }]
          }
        }
      },
      {
        "fullUrl" : "http://apply-processor/DetectedIssue/DetectedIssue1",
        "resource" : {
          "resourceType" : "DetectedIssue",
          "id" : "DetectedIssue1",
          "status" : "final",
          "code" : {
            "coding" : [{
              "system" : "http://terminology.hl7.org/CodeSystem/v3-ActCode",
              "code" : "TIME",
              "display" : "timing detected issue"
            }]
          },
          "severity" : "high",
          "patient" : {
            "reference" : "Patient/Patient1"
          },
          "identifiedDateTime" : "2023-01-01"
        }
      },
      {
        "fullUrl" : "http://apply-processor/Condition/Condition1",
        "resource" : {
          "resourceType" : "Condition",
          "id" : "Condition1",
          "clinicalStatus" : {
            "coding" : [{
              "system" : "http://terminology.hl7.org/CodeSystem/condition-clinical",
              "code" : "active"
            }]
          },
          "verificationStatus" : {
            "coding" : [{
              "system" : "http://terminology.hl7.org/CodeSystem/condition-ver-status",
              "code" : "provisional"
            }]
          },
          "category" : [{
            "coding" : [{
              "system" : "http://terminology.hl7.org/CodeSystem/condition-category",
              "code" : "problem-list-item"
            }]
          }],
          "code" : {
            "coding" : [{
              "system" : "http://snomed.info/sct",
              "code" : "422504002",
              "display" : "Ischemic stroke (disorder)"
            }]
          },
          "subject" : {
            "reference" : "Patient/Patient1"
          },
          "recordedDate" : "2023-01-01"
        }
      },
      {
        "fullUrl" : "http://apply-processor/Inference/Inference1",
        "resource" : {
          "resourceType" : "Observation",
          "id" : "Inference1",
          "status" : "final",
          "code" : {
            "coding" : [{
              "system" : "http://snomed.info/sct",
              "code" : "448765001",
              "display" : "Unintentional weight loss (finding)"
            }],
            "text" : "Inference"
          },
          "subject" : {
            "reference" : "Patient/Patient1"
          },
          "effectiveDateTime" : "2023-01-01"
        }
      },
      {
        "fullUrl" : "http://apply-processor/Flag/Flag1",
        "resource" : {
          "resourceType" : "Flag",
          "id" : "Flag1",
          "status" : "active",
          "category" : [{
            "coding" : [{
              "system" : "http://terminology.hl7.org/CodeSystem/flag-category",
              "code" : "admin",
              "display" : "Administrative"
            }]
          }],
          "code" : {
            "text" : "Flag"
          },
          "subject" : {
            "reference" : "Patient/Patient1"
          },
          "period" : {
            "start" : "2023-01-01",
            "end" : "2024-01-01"
          }
        }
      },
      {
        "fullUrl" : "http://apply-processor/ActiveRaTreatmentFeature/ActiveRaTreatmentFeature1",
        "resource" : {
          "resourceType" : "Observation",
          "id" : "ActiveRaTreatmentFeature1",
          "meta" : {
            "profile" : ["http://example.org/StructureDefinition/ActiveRaTreatmentFeature"]
          },
          "status" : "final",
          "code" : {
            "coding" : [{
              "system" : "http://example.org/CodeSystem/CaseFeatureCodes",
              "code" : "on-ra-treatment"
            }]
          },
          "subject" : {
            "reference" : "Patient/Patient1"
          },
          "valueBoolean" : true,
          "derivedFrom" : [{
            "reference" : "QuestionnaireResponse/RaQuestionnaireResponse3"
          }]
        }
      }]
    }
  },
  {
    "name" : "questionnaireResponse",
    "resource" : {
      "resourceType" : "QuestionnaireResponse",
      "id" : "RaQuestionnaireResponse3",
      "contained" : [{
        "resourceType" : "Questionnaire",
        "id" : "RaQuestionnaire3",
        "extension" : [{
          "extension" : [{
            "url" : "name",
            "valueCoding" : {
              "system" : "http://hl7.org/fhir/uv/sdc/CodeSystem/launchContext",
              "code" : "patient"
            }
          },
          {
            "url" : "type",
            "valueCode" : "Patient"
          }],
          "url" : "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-launchContext"
        }],
        "url" : "http://questionnaire-processor/Questionnaire/RaQuestionnaire2",
        "status" : "draft",
        "item" : [{
          "extension" : [{
            "url" : "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-itemPopulationContext",
            "valueExpression" : {
              "name" : "ActiveRaTreatmentFeature",
              "language" : "text/cql-identifier",
              "expression" : "On RA Treatment",
              "reference" : "http://example.org/Library/ActiveRaTreatmentFeatureLogic"
            }
          }],
          "linkId" : "ActiveRaTreatmentFeature#Observation",
          "definition" : "http://example.org/StructureDefinition/ActiveRaTreatmentFeature#Observation",
          "text" : "Measurements and simple assertions",
          "type" : "group",
          "item" : [{
            "extension" : [{
              "url" : "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
              "valueBoolean" : true
            }],
            "linkId" : "ActiveRaTreatmentFeature#Observation.status",
            "definition" : "http://example.org/StructureDefinition/ActiveRaTreatmentFeature#Observation.status",
            "text" : "registered | preliminary | final | amended +",
            "type" : "choice",
            "required" : true,
            "initial" : [{
              "valueCoding" : {
                "system" : "http://hl7.org/fhir/observation-status",
                "code" : "final"
              }
            }]
          },
          {
            "extension" : [{
              "url" : "http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",
              "valueBoolean" : true
            }],
            "linkId" : "ActiveRaTreatmentFeature#Observation.code",
            "definition" : "http://example.org/StructureDefinition/ActiveRaTreatmentFeature#Observation.code",
            "text" : "Type of observation (code / type)",
            "type" : "choice",
            "required" : true,
            "initial" : [{
              "valueCoding" : {
                "system" : "http://example.org/CodeSystem/CaseFeatureCodes",
                "code" : "on-ra-treatment"
              }
            }]
          },
          {
            "extension" : [{
              "url" : "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",
              "valueExpression" : {
                "language" : "text/cql-expression",
                "expression" : "%ActiveRaTreatmentFeature.value[x]"
              }
            }],
            "linkId" : "ActiveRaTreatmentFeature#Observation.valueBoolean",
            "definition" : "http://example.org/StructureDefinition/ActiveRaTreatmentFeature#Observation.valueBoolean",
            "text" : "Actual result",
            "type" : "boolean"
          }]
        }]
      }],
      "questionnaire" : "http://questionnaire-processor/Questionnaire/RaQuestionnaire2",
      "status" : "completed",
      "subject" : {
        "reference" : "Patient/Patient1"
      },
      "authored" : "2023-12-06T11:45:33+11:00",
      "author" : {
        "reference" : "Practitioner/Practitioner1"
      },
      "item" : [{
        "linkId" : "ActiveRaTreatmentFeature#Observation",
        "definition" : "http://example.org/StructureDefinition/ActiveRaTreatmentFeature#Observation",
        "text" : "Measurements and simple assertions",
        "item" : [{
          "linkId" : "ActiveRaTreatmentFeature#Observation.valueBoolean",
          "definition" : "http://example.org/StructureDefinition/ActiveRaTreatmentFeature#Observation.valueBoolean",
          "text" : "Actual result",
          "answer" : [{
            "valueBoolean" : false
          }]
        },
        {
          "linkId" : "ActiveRaTreatmentFeature#Observation.status",
          "definition" : "http://example.org/StructureDefinition/ActiveRaTreatmentFeature#Observation.status",
          "text" : "registered | preliminary | final | amended +",
          "answer" : [{
            "valueCoding" : {
              "system" : "http://hl7.org/fhir/observation-status",
              "code" : "final"
            }
          }]
        },
        {
          "linkId" : "ActiveRaTreatmentFeature#Observation.code",
          "definition" : "http://example.org/StructureDefinition/ActiveRaTreatmentFeature#Observation.code",
          "text" : "Type of observation (code / type)",
          "answer" : [{
            "valueCoding" : {
              "system" : "http://example.org/CodeSystem/CaseFeatureCodes",
              "code" : "on-ra-treatment"
            }
          }]
        }]
      }]
    }
  }]
}