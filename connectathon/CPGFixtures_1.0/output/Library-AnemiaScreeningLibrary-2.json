{
   "library" : {
      "annotation" : [ {
         "translatorOptions" : "EnableAnnotations,EnableLocators",
         "signatureLevel" : "None",
         "type" : "CqlToElmInfo"
      }, {
         "message" : "The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime.",
         "errorType" : "semantic",
         "errorSeverity" : "warning",
         "type" : "CqlToElmError"
      }, {
         "message" : "The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime.",
         "errorType" : "semantic",
         "errorSeverity" : "warning",
         "type" : "CqlToElmError"
      }, {
         "message" : "The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime.",
         "errorType" : "semantic",
         "errorSeverity" : "warning",
         "type" : "CqlToElmError"
      }, {
         "message" : "The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime.",
         "errorType" : "semantic",
         "errorSeverity" : "warning",
         "type" : "CqlToElmError"
      }, {
         "type" : "Annotation",
         "s" : {
            "r" : "31",
            "s" : [ {
               "value" : [ "","library AnemiaScreeningLibrary version '0.1.0'" ]
            } ]
         }
      } ],
      "identifier" : {
         "id" : "AnemiaScreeningLibrary",
         "system" : "http://example.org",
         "version" : "0.1.0"
      },
      "schemaIdentifier" : {
         "id" : "urn:hl7-org:elm",
         "version" : "r1"
      },
      "usings" : {
         "def" : [ {
            "localIdentifier" : "System",
            "uri" : "urn:hl7-org:elm-types:r1"
         }, {
            "localId" : "1",
            "locator" : "3:1-3:26",
            "localIdentifier" : "FHIR",
            "uri" : "http://hl7.org/fhir",
            "version" : "4.0.1",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "1",
                  "s" : [ {
                     "value" : [ "","using " ]
                  }, {
                     "s" : [ {
                        "value" : [ "FHIR" ]
                     } ]
                  }, {
                     "value" : [ " version '4.0.1'" ]
                  } ]
               }
            } ]
         } ]
      },
      "includes" : {
         "def" : [ {
            "localId" : "2",
            "locator" : "5:1-5:35",
            "localIdentifier" : "FHIRHelpers",
            "path" : "http://example.org/FHIRHelpers",
            "version" : "0.1.0",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "2",
                  "s" : [ {
                     "value" : [ "","include " ]
                  }, {
                     "s" : [ {
                        "value" : [ "FHIRHelpers" ]
                     } ]
                  }, {
                     "value" : [ " version ","'0.1.0'" ]
                  } ]
               }
            } ]
         } ]
      },
      "codeSystems" : {
         "def" : [ {
            "localId" : "3",
            "locator" : "7:1-7:45",
            "name" : "SNOMED",
            "id" : "http://snomed.info/sct",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "3",
                  "s" : [ {
                     "value" : [ "","codesystem ","\"SNOMED\"",": ","'http://snomed.info/sct'" ]
                  } ]
               }
            } ]
         } ]
      },
      "codes" : {
         "def" : [ {
            "localId" : "5",
            "locator" : "8:1-9:73",
            "name" : "Unintentional weight loss",
            "id" : "448765001",
            "display" : "Unintentional weight loss (finding)",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "5",
                  "s" : [ {
                     "value" : [ "","code ","\"Unintentional weight loss\"",":\n  ","'448765001'"," from " ]
                  }, {
                     "r" : "4",
                     "s" : [ {
                        "value" : [ "\"SNOMED\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'Unintentional weight loss (finding)'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "4",
               "locator" : "9:20-9:27",
               "name" : "SNOMED"
            }
         }, {
            "localId" : "7",
            "locator" : "10:1-11:79",
            "name" : "Inadequate mineral intake",
            "id" : "441921000124106",
            "display" : "Inadequate mineral intake (finding)",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "7",
                  "s" : [ {
                     "value" : [ "","code ","\"Inadequate mineral intake\"",":\n  ","'441921000124106'"," from " ]
                  }, {
                     "r" : "6",
                     "s" : [ {
                        "value" : [ "\"SNOMED\"" ]
                     } ]
                  }, {
                     "value" : [ " display ","'Inadequate mineral intake (finding)'" ]
                  } ]
               }
            } ],
            "codeSystem" : {
               "localId" : "6",
               "locator" : "11:26-11:33",
               "name" : "SNOMED"
            }
         } ]
      },
      "contexts" : {
         "def" : [ {
            "locator" : "13:1-13:15",
            "name" : "Patient"
         } ]
      },
      "statements" : {
         "def" : [ {
            "locator" : "13:1-13:15",
            "name" : "Patient",
            "context" : "Patient",
            "expression" : {
               "type" : "SingletonFrom",
               "operand" : {
                  "locator" : "13:1-13:15",
                  "dataType" : "{http://hl7.org/fhir}Patient",
                  "templateId" : "http://hl7.org/fhir/StructureDefinition/Patient",
                  "type" : "Retrieve"
               }
            }
         }, {
            "localId" : "10",
            "locator" : "15:1-16:12",
            "name" : "Patient id",
            "context" : "Patient",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "10",
                  "s" : [ {
                     "value" : [ "","define ","\"Patient id\"",":\n  " ]
                  }, {
                     "r" : "9",
                     "s" : [ {
                        "r" : "8",
                        "s" : [ {
                           "value" : [ "Patient" ]
                        } ]
                     }, {
                        "value" : [ "." ]
                     }, {
                        "r" : "9",
                        "s" : [ {
                           "value" : [ "id" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "9",
               "locator" : "16:3-16:12",
               "path" : "id",
               "type" : "Property",
               "source" : {
                  "localId" : "8",
                  "locator" : "16:3-16:9",
                  "name" : "Patient",
                  "type" : "ExpressionRef"
               }
            }
         }, {
            "localId" : "18",
            "locator" : "18:1-21:3",
            "name" : "Observation",
            "context" : "Patient",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "18",
                  "s" : [ {
                     "value" : [ "","define ","\"Observation\"",":\n  " ]
                  }, {
                     "r" : "17",
                     "s" : [ {
                        "value" : [ "First","(" ]
                     }, {
                        "r" : "16",
                        "s" : [ {
                           "s" : [ {
                              "r" : "12",
                              "s" : [ {
                                 "r" : "11",
                                 "s" : [ {
                                    "r" : "11",
                                    "s" : [ {
                                       "value" : [ "[","Observation","]" ]
                                    } ]
                                 } ]
                              }, {
                                 "value" : [ " ","M" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "\n    " ]
                        }, {
                           "r" : "15",
                           "s" : [ {
                              "value" : [ "sort by " ]
                           }, {
                              "r" : "14",
                              "s" : [ {
                                 "r" : "13",
                                 "s" : [ {
                                    "value" : [ "effective" ]
                                 } ]
                              } ]
                           } ]
                        } ]
                     }, {
                        "value" : [ "\n  )" ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "17",
               "locator" : "19:3-21:3",
               "type" : "First",
               "source" : {
                  "localId" : "16",
                  "locator" : "19:9-20:21",
                  "type" : "Query",
                  "source" : [ {
                     "localId" : "12",
                     "locator" : "19:9-19:23",
                     "alias" : "M",
                     "expression" : {
                        "localId" : "11",
                        "locator" : "19:9-19:21",
                        "dataType" : "{http://hl7.org/fhir}Observation",
                        "templateId" : "http://hl7.org/fhir/StructureDefinition/Observation",
                        "type" : "Retrieve"
                     }
                  } ],
                  "relationship" : [ ],
                  "sort" : {
                     "localId" : "15",
                     "locator" : "20:5-20:21",
                     "by" : [ {
                        "localId" : "14",
                        "locator" : "20:13-20:21",
                        "direction" : "asc",
                        "path" : "effective",
                        "type" : "ByColumn"
                     } ]
                  }
               }
            }
         }, {
            "localId" : "23",
            "locator" : "23:1-24:35",
            "name" : "Observation Code",
            "context" : "Patient",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "23",
                  "s" : [ {
                     "value" : [ "","define ","\"Observation Code\"",":\n  " ]
                  }, {
                     "r" : "22",
                     "s" : [ {
                        "r" : "21",
                        "s" : [ {
                           "r" : "20",
                           "s" : [ {
                              "r" : "19",
                              "s" : [ {
                                 "value" : [ "\"Observation\"" ]
                              } ]
                           }, {
                              "value" : [ "." ]
                           }, {
                              "r" : "20",
                              "s" : [ {
                                 "value" : [ "code" ]
                              } ]
                           } ]
                        }, {
                           "value" : [ "." ]
                        }, {
                           "r" : "21",
                           "s" : [ {
                              "value" : [ "coding" ]
                           } ]
                        } ]
                     }, {
                        "value" : [ "." ]
                     }, {
                        "r" : "22",
                        "s" : [ {
                           "value" : [ "first","()" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "22",
               "locator" : "24:3-24:35",
               "type" : "First",
               "source" : {
                  "localId" : "21",
                  "locator" : "24:3-24:27",
                  "path" : "coding",
                  "type" : "Property",
                  "source" : {
                     "localId" : "20",
                     "locator" : "24:3-24:20",
                     "path" : "code",
                     "type" : "Property",
                     "source" : {
                        "localId" : "19",
                        "locator" : "24:3-24:15",
                        "name" : "Observation",
                        "type" : "ExpressionRef"
                     }
                  }
               }
            }
         }, {
            "localId" : "27",
            "locator" : "26:1-27:50",
            "name" : "Needs CBC",
            "context" : "Patient",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "27",
                  "s" : [ {
                     "value" : [ "","define ","\"Needs CBC\"",":\n  " ]
                  }, {
                     "r" : "26",
                     "s" : [ {
                        "r" : "24",
                        "s" : [ {
                           "value" : [ "\"Observation Code\"" ]
                        } ]
                     }, {
                        "value" : [ " ","="," " ]
                     }, {
                        "r" : "25",
                        "s" : [ {
                           "value" : [ "\"Unintentional weight loss\"" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "26",
               "locator" : "27:3-27:50",
               "type" : "Equal",
               "operand" : [ {
                  "name" : "ToCode",
                  "libraryName" : "FHIRHelpers",
                  "type" : "FunctionRef",
                  "operand" : [ {
                     "localId" : "24",
                     "locator" : "27:3-27:20",
                     "name" : "Observation Code",
                     "type" : "ExpressionRef"
                  } ]
               }, {
                  "localId" : "25",
                  "locator" : "27:24-27:50",
                  "name" : "Unintentional weight loss",
                  "type" : "CodeRef"
               } ]
            }
         }, {
            "localId" : "31",
            "locator" : "29:1-30:50",
            "name" : "Needs serum ferritin",
            "context" : "Patient",
            "accessLevel" : "Public",
            "annotation" : [ {
               "type" : "Annotation",
               "s" : {
                  "r" : "31",
                  "s" : [ {
                     "value" : [ "","define ","\"Needs serum ferritin\"",":\n  " ]
                  }, {
                     "r" : "30",
                     "s" : [ {
                        "r" : "28",
                        "s" : [ {
                           "value" : [ "\"Observation Code\"" ]
                        } ]
                     }, {
                        "value" : [ " ","="," " ]
                     }, {
                        "r" : "29",
                        "s" : [ {
                           "value" : [ "\"Inadequate mineral intake\"" ]
                        } ]
                     } ]
                  } ]
               }
            } ],
            "expression" : {
               "localId" : "30",
               "locator" : "30:3-30:50",
               "type" : "Equal",
               "operand" : [ {
                  "name" : "ToCode",
                  "libraryName" : "FHIRHelpers",
                  "type" : "FunctionRef",
                  "operand" : [ {
                     "localId" : "28",
                     "locator" : "30:3-30:20",
                     "name" : "Observation Code",
                     "type" : "ExpressionRef"
                  } ]
               }, {
                  "localId" : "29",
                  "locator" : "30:24-30:50",
                  "name" : "Inadequate mineral intake",
                  "type" : "CodeRef"
               } ]
            }
         } ]
      }
   }
}