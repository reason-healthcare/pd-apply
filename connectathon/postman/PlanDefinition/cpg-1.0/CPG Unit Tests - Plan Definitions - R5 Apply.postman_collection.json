{
	"info": {
		"_postman_id": "a73d78c6-8ba9-4ad5-94de-114fc7e0f07d",
		"name": "CPG Unit Tests - Plan Definitions - R5 Apply",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "30067563"
	},
	"item": [
		{
			"name": "PlanDefinition - CKDEducation",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"CKDEducationExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/CKDEducationRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"CKDEducationRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/CKDEducationPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Patient Education\",",
							"            \"description\": \"Provide verbal and written education on disease state at time of CKD diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"CKDEducationParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/CKDEducationPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - ReportHeightWeight",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"ReportHeightWeightExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/ReportHeightWeightRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"ReportHeightWeightRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/ReportWeightHeightPlan|0.1.0\"",
							"        ],",
							"        \"extension\": [",
							"          {",
							"            \"url\": \"http://hl7.org/fhir/StructureDefinition/resource-pertainsToGoal\",",
							"            \"valueReference\": {",
							"              \"reference\": \"Goal/WeightTargetGoal\"",
							"            }",
							"          }",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Report Weight\",",
							"            \"description\": \"Report weight metric upon admission\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"diagnostic-testing\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Conduct Diagnostic Tests\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          },",
							"          {",
							"            \"title\": \"Report Height\",",
							"            \"description\": \"Report height metric upon admission\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"diagnostic-testing\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Conduct Diagnostic Tests\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"resource\": {",
							"        \"resourceType\": \"Goal\",",
							"        \"id\": \"WeightTargetGoal\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"lifecycleStatus\": \"proposed\",",
							"        \"description\": {",
							"          \"text\": \"Weight target\"",
							"        }",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"ReportHeightWeightParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/ReportWeightHeightPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - DischargeFollowUpPlan",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"DischargeFollowUpExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/DischargeRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"DischargeRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/DischargeFollowUpPlan|0.1.0\"",
							"        ],",
							"        \"extension\": [",
							"          {",
							"            \"url\": \"http://hl7.org/fhir/StructureDefinition/resource-pertainsToGoal\",",
							"            \"valueReference\": {",
							"              \"reference\": \"Goal/PatientMonitoringGoal\"",
							"            }",
							"          }",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Monitor patient\",",
							"            \"description\": \"Monitor patient post discharge\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"action\": [",
							"              {",
							"                \"title\": \"Case management or referral\",",
							"                \"code\": [",
							"                  {",
							"                    \"coding\": [",
							"                      {",
							"                        \"code\": \"discharge-referral-of-patient\",",
							"                        \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                        \"display\": \"Discharge/Referral of Patient\"",
							"                      }",
							"                    ]",
							"                  }",
							"                ]",
							"              },",
							"              {",
							"                \"title\": \"Schedule follow-up visit\",",
							"                \"code\": [",
							"                  {",
							"                    \"coding\": [",
							"                      {",
							"                        \"code\": \"monitor-and-follow-up-of-patient\",",
							"                        \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                        \"display\": \"Monitor and Follow-up of Patient\"",
							"                      }",
							"                    ]",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"resource\": {",
							"        \"resourceType\": \"Goal\",",
							"        \"id\": \"PatientMonitoringGoal\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"lifecycleStatus\": \"proposed\",",
							"        \"description\": {",
							"          \"text\": \"Patient monitoring\"",
							"        }",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"DischargeFollowUpParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/DischargeFollowUpPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - IronDeficiencyTreatmentPlan",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"IronDeficiencyTreatmentExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/IronDeficiencyTreatmentRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"IronDeficiencyTreatmentRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/IronDeficiencyTreatmentPlan|0.1.0\"",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"IronDeficiencyTreatmentParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/IronDeficiencyTreatmentPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - IschemicStroke",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"IschemicStrokeExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/IschemicStrokeRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"IschemicStrokeRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/IschemicStrokePlan|0.1.0\"",
							"        ],",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Ischemic Stroke Treatment\",",
							"            \"description\": \"Recommendation to administer TPA if patient had Ischemic Stroke\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"dispense-medications\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Dispense Medications\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"textEquivalent\": \"Administer TPA intravenously\",",
							"            \"condition\": [",
							"                {",
							"                    \"kind\": \"applicability\",",
							"                    \"expression\": {",
							"                        \"language\": \"text/cql-identifier\",",
							"                        \"expression\": \"Had Ischemic Stroke\"",
							"                    }",
							"                }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"IschemicStrokeParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/IschemicStrokePlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - AnemiaScreening",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"AnemiaScreeningExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/AnemiaScreeningRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"AnemiaScreeningRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/AnemiaScreeningPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Order CBC Lab Panel\",",
							"            \"description\": \"Order CBC Lab Panel to screen for anemia\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"diagnostic-testing\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Conduct Diagnostic Tests\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"condition\": [",
							"                {",
							"                    \"kind\": \"applicability\",",
							"                    \"expression\": {",
							"                        \"language\": \"text/cql-identifier\",",
							"                        \"expression\": \"Needs CBC\"",
							"                    }",
							"                }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"AnemiaScreeningParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/AnemiaScreeningPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - CKDManagment",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"CKDManagementExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/CKDManagementRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"CKDManagementRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/CKDManagementPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Education\",",
							"            \"description\": \"CKD Education at time of diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/InlineCKDEducationRequestGroup\"",
							"            }",
							"          },",
							"          {",
							"            \"title\": \"Follow Up Plan\",",
							"            \"description\": \"Schedule follow up with nephrologist\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/CKDFollowUpRequestGroup\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/CKDFollowUpRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"CKDFollowUpRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/CKDFollowUpPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Follow Up Plan\",",
							"            \"description\": \"Schedule follow up with a nephrologist at time of CKD diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/InlineCKDEducationRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"InlineCKDEducationRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/CKDEducationPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Patient Education\",",
							"            \"description\": \"Provide verbal and written education on disease state at time of CKD diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"CKDManagementParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/CKDManagementPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - SendMessage",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"SendMessagePlanExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/SendMessageRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"SendMessageRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/SendMessagePlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Greet the patient\",",
							"            \"description\": \"Send a message with a greeting\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"alerts-reminders-education\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Alerts Reminders Education\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"type\": {",
							"              \"coding\": [",
							"                {",
							"                  \"code\": \"create\",",
							"                  \"system\": \"http://terminology.hl7.org/CodeSystem/action-type\"",
							"                }",
							"              ]",
							"            },",
							"            \"resource\": {",
							"              \"reference\": \"CommunicationRequest/SendMessageRequest\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/CommunicationRequest/SendMessageRequest\",",
							"      \"resource\": {",
							"        \"resourceType\": \"CommunicationRequest\",",
							"        \"id\": \"SendMessageRequest\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-communicationrequest\"",
							"          ]",
							"        },",
							"        \"status\": \"draft\",",
							"        \"doNotPerform\": false,",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"requester\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"payload\": [",
							"          {",
							"            \"contentString\": \"Greeting: Hello! Alice Message: Example Activity Definition for a recommendation to send a message Practitioner: Michael\"",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"SendMessagePlanParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/SendMessagePlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - Registration",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"RegistrationExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/RegistrationRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"RegistrationRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/$cpg-computableplandefinition/RegistrationPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Registration with questionnaire\",",
							"            \"description\": \"Register patient using questionnaire\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"registration\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Registration\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"Questionnaire/RegistrationQuestionnaire\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"        \"resource\": {",
							"            \"resourceType\": \"Questionnaire\",",
							"            \"id\": \"RegistrationQuestionnaire\",",
							"            \"meta\": {",
							"                \"versionId\": \"1\",",
							"                \"lastUpdated\": \"2024-01-30T10:34:09.249-07:00\",",
							"                \"source\": \"#dgSmHYY0U7coLSmF\",",
							"                \"profile\": [",
							"                    \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-shareablequestionnaire\"",
							"                ]",
							"            },",
							"            \"extension\": [",
							"                {",
							"                    \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",",
							"                    \"valueCode\": \"publishable\"",
							"                },",
							"                {",
							"                    \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",",
							"                    \"valueCode\": \"structured\"",
							"                }",
							"            ],",
							"            \"url\": \"http://example.org/Questionnaire/RegistrationQuestionnaire\",",
							"            \"version\": \"0.1.0\",",
							"            \"name\": \"RegistrationQuestionnaire\",",
							"            \"title\": \"Questionnaire RegistrationQuestionnaire\",",
							"            \"status\": \"draft\",",
							"            \"experimental\": true,",
							"            \"date\": \"2024-01-31T14:03:42-07:00\",",
							"            \"publisher\": \"Example Publisher\",",
							"            \"contact\": [",
							"                {",
							"                    \"name\": \"Example Publisher\",",
							"                    \"telecom\": [",
							"                        {",
							"                            \"system\": \"url\",",
							"                            \"value\": \"http://example.org/example-publisher\"",
							"                        }",
							"                    ]",
							"                }",
							"            ],",
							"            \"description\": \"Questionnaire to collect identifying infomration\",",
							"            \"jurisdiction\": [",
							"                {",
							"                    \"coding\": [",
							"                        {",
							"                            \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",",
							"                            \"code\": \"001\",",
							"                            \"display\": \"World\"",
							"                        }",
							"                    ]",
							"                }",
							"            ],",
							"            \"item\": [",
							"                {",
							"                    \"linkId\": \"name\",",
							"                    \"text\": \"Name\",",
							"                    \"type\": \"string\",",
							"                    \"required\": true",
							"                }",
							"            ]",
							"        }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"RegistrationParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/$cpg-computableplandefinition/RegistrationPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - CkdPathway",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"CkdPathwayExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/CkdPathwayRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"CkdPathwayRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/CkdPathway|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Management\",",
							"            \"description\": \"Definition of plan for new diagnosis of CKD\",",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/InlineCKDManagementRequestGroup\"",
							"            }",
							"          },",
							"          {",
							"            \"title\": \"Greet patient\",",
							"            \"description\": \"Greet patient at time of patient portal sign up\",",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/InlineSendMessageRequestGroup\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/InlineCKDFollowUpRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"InlineCKDFollowUpRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/CKDFollowUpPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Follow Up Plan\",",
							"            \"description\": \"Schedule follow up with a nephrologist at time of CKD diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/InlineCkdEducationRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"InlineCkdEducationRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/CKDEducationPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Patient Education\",",
							"            \"description\": \"Provide verbal and written education on disease state at time of CKD diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/CommunicationRequest/InlineCommunicationRequest\",",
							"      \"resource\": {",
							"        \"resourceType\": \"CommunicationRequest\",",
							"        \"id\": \"InlineCommunicationRequest\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-communicationrequest\"",
							"          ]",
							"        },",
							"        \"status\": \"draft\",",
							"        \"doNotPerform\": false,",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"requester\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"payload\": [",
							"          {",
							"            \"contentString\": \"Greeting: Hello! Alice Message: Example Activity Definition for a recommendation to send a message Practitioner: Michael\"",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/InlineCKDManagementRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"InlineCKDManagementRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/CKDManagementPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Education\",",
							"            \"description\": \"CKD Education at time of diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/InlineCKDEducationRequestGroup\"",
							"            }",
							"          },",
							"          {",
							"            \"title\": \"Follow Up Plan\",",
							"            \"description\": \"Schedule follow up with nephrologist\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/InlineCKDFollowUpRequestGroup\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/InlineSendMessageRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"InlineSendMessageRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/SendMessagePlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Greet the patient\",",
							"            \"description\": \"Send a message with a greeting\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"alerts-reminders-education\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Alerts Reminders Education\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"type\": {",
							"              \"coding\": [",
							"                {",
							"                  \"code\": \"create\",",
							"                  \"system\": \"http://terminology.hl7.org/CodeSystem/action-type\"",
							"                }",
							"              ]",
							"            },",
							"            \"resource\": {",
							"              \"reference\": \"CommunicationRequest/InlineCommunicationRequest\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"CkdPathwayParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/CkdPathway\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - NeurologicalAssessment",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"NeurologicalAssessmentExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/NeurologicalAssessmentRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"NeurologicalAssessmentRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/NeurologicalAssessmentPlan|0.1.0\"",
							"        ],",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Order neurological exam\",",
							"            \"type\": {",
							"              \"coding\": [",
							"                {",
							"                  \"code\": \"create\",",
							"                  \"system\": \"http://terminology.hl7.org/CodeSystem/action-type\"",
							"                }",
							"              ]",
							"            },",
							"            \"resource\": {",
							"              \"reference\": \"ServiceRequest/InlineServiceRequest\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/ServiceRequest/InlineServiceRequest\",",
							"      \"resource\": {",
							"        \"resourceType\": \"ServiceRequest\",",
							"        \"id\": \"InlineServiceRequest\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-servicerequest\"",
							"          ]",
							"        },",
							"        \"status\": \"draft\",",
							"        \"intent\": \"proposal\",",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/ActivityDefinition/OrderServiceActivity|0.1.0\"",
							"        ],",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"requester\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"doNotPerform\": false,",
							"        \"code\": {",
							"          \"coding\": [",
							"            {",
							"              \"code\": \"order-service\",",
							"              \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-activity-type\",",
							"              \"display\": \"Order a service\"",
							"            }",
							"          ]",
							"        },",
							"        \"occurrencePeriod\": {",
							"          \"start\": \"2023-01-01\"",
							"        }",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"NeurologicalAssessmentParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/NeurologicalAssessmentPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - DischargeInstructions",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"DischargeInstructionsExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/DischargeInstructionsRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"DischargeInstructionsRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/DischargeInstructionsPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Send message with discharge instructions\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"type\": {",
							"              \"coding\": [",
							"                {",
							"                  \"code\": \"create\",",
							"                  \"system\": \"http://terminology.hl7.org/CodeSystem/action-type\"",
							"                }",
							"              ]",
							"            },",
							"            \"resource\": {",
							"              \"reference\": \"CommunicationRequest/DischargeMessageRequest\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/CommunicationRequest/DischargeMessageRequest\",",
							"      \"resource\": {",
							"        \"resourceType\": \"CommunicationRequest\",",
							"        \"id\": \"DischargeMessageRequest\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-communicationrequest\"",
							"          ]",
							"        },",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"requester\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"doNotPerform\": false,",
							"        \"payload\": [",
							"          {",
							"            \"contentString\": \"Provide patient discharge instructions for Alice\"",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"DischargeInstructionsParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/DischargeInstructionsPlan\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - IschemicStrokePathway",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"IschemicStrokePathExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/IschemicStrokePathRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"IschemicStrokePathRequestGroup\",",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/IschemicStrokePathway|0.1.0\"",
							"        ],",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Generate Report\",",
							"            \"type\": {",
							"              \"coding\": [",
							"                {",
							"                  \"code\": \"create\",",
							"                  \"system\": \"http://terminology.hl7.org/CodeSystem/action-type\"",
							"                }",
							"              ]",
							"            },",
							"            \"resource\": {",
							"              \"reference\": \"Task/GenerateReportRequest\"",
							"            }",
							"          },",
							"          {",
							"            \"title\": \"Ischemic Stroke Plan\",",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/IschemicStrokeRequestGroup\"",
							"            },",
							"            \"action\": [",
							"              {",
							"                \"title\": \"Order Medication\",",
							"                \"type\": {",
							"                  \"coding\": [",
							"                    {",
							"                      \"code\": \"create\",",
							"                      \"system\": \"http://terminology.hl7.org/CodeSystem/action-type\"",
							"                    }",
							"                  ]",
							"                },",
							"                \"resource\": {",
							"                  \"reference\": \"MedicationRequest/OrderMedicationRequest\"",
							"                }",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/Task/GenerateReportRequest\",",
							"      \"resource\": {",
							"        \"resourceType\": \"Task\",",
							"        \"id\": \"GenerateReportRequest\",",
							"        \"status\": \"draft\",",
							"        \"intent\": \"option\",",
							"        \"instantiatesCanonical\": \"http://example.org/ActivityDefinition/GenerateReportActivity|0.1.0\",",
							"        \"for\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"requester\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"code\": {",
							"          \"coding\": [",
							"            {",
							"              \"code\": \"generate-report\",",
							"              \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-activity-type\",",
							"              \"display\": \"Generate a metric or case report\"",
							"            }",
							"          ]",
							"        },",
							"        \"input\": [",
							"          {",
							"            \"type\": {",
							"              \"coding\": [",
							"                {",
							"                  \"code\": \"generate-report\",",
							"                  \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-activity-type\",",
							"                  \"display\": \"Generate a metric or case report\"",
							"                }",
							"              ]",
							"            },",
							"            \"valueCanonical\": \"http://hl7.org/fhir/uv/cpg/Measure/activity-example-generatereport\"",
							"          }",
							"        ],",
							"        \"description\": \"Plan to treat patient with ischemic stroke for patient Alice\"",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/InlineIschemicStrokeRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"InlineIschemicStrokeRequestGroup\",",
							"        \"intent\": \"option\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/PlanDefinition/IschemicStrokePlan|0.1.0\"",
							"        ],",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Ischemic Stroke Treatment\",",
							"            \"description\": \"Recommendation to administer TPA if patient had Ischemic Stroke\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"dispense-medications\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Dispense Medications\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"textEquivalent\": \"Administer TPA intravenously\"",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/MedicationRequest/OrderMedicationRequest\",",
							"      \"resource\": {",
							"        \"resourceType\": \"MedicationRequest\",",
							"        \"id\": \"OrderMedicationRequest\",",
							"        \"status\": \"draft\",",
							"        \"intent\": \"option\",",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.org/ActivityDefinition/OrderMedicationActivity|0.1.0\"",
							"        ],",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"requester\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"doNotPerform\": false,",
							"        \"medicationReference\": {",
							"          \"reference\": \"Medication/CurrentMedication\"",
							"        },",
							"        \"dosageInstruction\": [",
							"          {",
							"            \"sequence\": 1,",
							"            \"text\": \"75mcg daily\",",
							"            \"timing\": {",
							"              \"repeat\": {",
							"                \"frequency\": 1,",
							"                \"period\": 1,",
							"                \"periodUnit\": \"d\"",
							"              }",
							"            },",
							"            \"route\": {",
							"              \"coding\": [",
							"                {",
							"                  \"code\": \"26643006\",",
							"                  \"system\": \"http://snomed.info/sct\",",
							"                  \"display\": \"Oral Route (qualifier value)\"",
							"                }",
							"              ]",
							"            },",
							"            \"doseAndRate\": [",
							"              {",
							"                \"type\": {",
							"                  \"coding\": [",
							"                    {",
							"                      \"code\": \"ordered\",",
							"                      \"system\": \"http://terminology.hl7.org/CodeSystem/dose-rate-type\",",
							"                      \"display\": \"Ordered\"",
							"                    }",
							"                  ]",
							"                },",
							"                \"doseQuantity\": {",
							"                  \"value\": 75,",
							"                  \"code\": \"ug\",",
							"                  \"system\": \"http://unitsofmeasure.org\",",
							"                  \"unit\": \"mcg\"",
							"                }",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: IschemicStrokePathway $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"resourceType\": \"Parameters\",\n    \"id\": \"IschemicStrokePathwayParameters\",\n    \"parameter\": [\n        {\n            \"name\": \"subject\",\n            \"valueString\": \"Patient/Patient1\"\n        },\n        {\n            \"name\": \"practitioner\",\n            \"valueString\": \"Practitioner/Practitioner1\"\n        },\n        {\n            \"name\": \"encounter\",\n            \"valueString\": \"Encounter/Encounter1\"\n        },\n        {\n            \"name\": \"canonical\",\n            \"valueString\": \"http://example.org/PlanDefinition/IschemicStrokePathway\"\n        },\n        {\n            \"name\": \"contentEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{contentEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"content\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{contentEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"terminologyEndpoint\",\n            \"resource\": {\n                \"resourceType\": \"Endpoint\",\n                \"address\": \"{{terminologyEndpointAddress}}\",\n                \"status\": \"active\",\n                \"payloadType\": [\n                    {\n                        \"coding\": [\n                            {\n                                \"code\": \"terminology\"\n                            }\n                        ]\n                    }\n                ],\n                \"connectionType\": {\n                    \"code\": \"{{terminologyEndpointType}}\"\n                }\n            }\n        },\n        {\n            \"name\": \"data\",\n            \"resource\": {\n                \"resourceType\": \"Bundle\",\n                \"id\": \"PatientTestBundle1\",\n                \"type\": \"collection\",\n                \"entry\": [\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Patient\",\n                            \"id\": \"Patient1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Alice\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Encounter\",\n                            \"id\": \"Encounter1\",\n                            \"status\": \"in-progress\",\n                            \"class\": {\n                                \"code\": \"AMB\",\n                                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"participant\": [\n                                {\n                                    \"individual\": {\n                                        \"reference\": \"Practitioner/Practitioner1\"\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Practitioner\",\n                            \"id\": \"Practitioner1\",\n                            \"name\": [\n                                {\n                                    \"given\": [\n                                        \"Michael\"\n                                    ]\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"MedicationRequest\",\n                            \"id\": \"PastMedicationRequest\",\n                            \"status\": \"active\",\n                            \"intent\": \"order\",\n                            \"authoredOn\": \"2023-01-01\",\n                            \"medicationCodeableConcept\": {\n                                \"text\": \"Some medication\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            }\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Medication\",\n                            \"id\": \"CurrentMedication\",\n                            \"status\": \"active\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Medication\",\n                            \"id\": \"PastMedication\",\n                            \"form\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"pill\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Pill\"\n                                    }\n                                ]\n                            },\n                            \"status\": \"inactive\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"DetectedIssue\",\n                            \"id\": \"DetectedIssue1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"TIME\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                                        \"display\": \"Time-related Detected Issue\"\n                                    }\n                                ]\n                            },\n                            \"severity\": \"high\",\n                            \"patient\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"identifiedDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Condition\",\n                            \"id\": \"Condition1\",\n                            \"clinicalStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"active\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                                    }\n                                ]\n                            },\n                            \"verificationStatus\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"provisional\",\n                                        \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                                    }\n                                ]\n                            },\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"problem-list-item\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"coding\": [\n                                    {\n                                        \"code\": \"422504002\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Ischemic stroke (disorder)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"recordedDate\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Observation\",\n                            \"id\": \"Inference1\",\n                            \"status\": \"final\",\n                            \"code\": {\n                                \"text\": \"Inference\",\n                                \"coding\": [\n                                    {\n                                        \"code\": \"448765001\",\n                                        \"system\": \"http://snomed.info/sct\",\n                                        \"display\": \"Unintentional weight loss (finding)\"\n                                    }\n                                ]\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"effectiveDateTime\": \"2023-01-01\"\n                        }\n                    },\n                    {\n                        \"resource\": {\n                            \"resourceType\": \"Flag\",\n                            \"id\": \"Flag1\",\n                            \"status\": \"active\",\n                            \"category\": [\n                                {\n                                    \"coding\": [\n                                        {\n                                            \"code\": \"admin\",\n                                            \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                                            \"display\": \"Administrative\"\n                                        }\n                                    ]\n                                }\n                            ],\n                            \"code\": {\n                                \"text\": \"Flag\"\n                            },\n                            \"subject\": {\n                                \"reference\": \"Patient/Patient1\"\n                            },\n                            \"period\": {\n                                \"start\": \"2023-01-01\",\n                                \"end\": \"2024-01-01\"\n                            }\n                        }\n                    }\n                ]\n            }\n        }\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$r5.apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$r5.apply"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"/**",
					" * Delete the id and text as this can vary per request",
					" */",
					"Object.prototype.testPrepare = function testPrepare(resource) {",
					"  delete resource.id;",
					"  delete resource.text;",
					"  ",
					"  resource.entry.forEach(e => {",
					"    delete e.fullUrl;",
					"    delete e.resource.id;",
					"    e.resource.meta ? delete e.resource.meta : null",
					"    if (e.resource.extension) {",
					"      e.resource.extension.forEach(ext => {",
					"        ext.valueReference ? delete ext.valueReference.reference : null",
					"      })",
					"    }",
					"    if (e.resource.action) {",
					"      e.resource.action.forEach(a => {",
					"        a.resource ? delete a.resource.reference : null",
					"        if (a.action) {",
					"          a.action.forEach(subA => {",
					"            subA.resource ? delete subA.resource.reference : null",
					"          })",
					"        }",
					"      })",
					"    }",
					"  })",
					"  return resource;",
					"}",
					"",
					"function clearEmpties(el) {",
					"  function internalClean(el) {",
					"    return _.transform(el, function(result, value, key) {",
					"      var isCollection = _.isObject(value);",
					"      var cleaned = isCollection ? internalClean(value) : value;",
					"      if (isCollection && _.isEmpty(cleaned)) {",
					"        return;",
					"      }",
					"      _.isArray(result) ? result.push(cleaned) : (result[key] = cleaned);",
					"    });",
					"  }",
					"  return _.isObject(el) ? internalClean(el) : el;",
					"}",
					"",
					"/**",
					" * Find difference between two objects",
					" * @param  {object} origObj - Source object to compare newObj against",
					" * @param  {object} newObj  - New object with potential changes",
					" * @return {object} differences",
					" */",
					"function difference(origObj, newObj) {",
					"  function changes(newObj, origObj) {",
					"    let arrayIndexCounter = 0",
					"    return _.transform(newObj, function (result, value, key) {",
					"      if (!_.isEqual(value, origObj[key])) {",
					"        let resultKey = _.isArray(origObj) ? arrayIndexCounter++ : key",
					"        result[resultKey] = ",
					"            (_.isObject(value) && _.isObject(origObj[key])) ",
					"                ? changes(value, origObj[key]) : value",
					"      }",
					"    })",
					"  }",
					"  return changes(newObj, origObj)",
					"}",
					"",
					"/**",
					" * Does a deep equal comparison, uses console.log to show diffs if fails.",
					" * ",
					" * @example",
					" * pm.test(\"My test\", function() {",
					" *   _.expectToDeepEqual(pm.response.json(), expected, console);",
					" * });",
					" */",
					"Object.prototype.expectToDeepEqual = (actual, expected, console = console) => {",
					"  try {",
					"    pm.expect(_.testPrepare(actual)).to.deep.equal(_.testPrepare(expected));",
					"  } catch (e) {",
					"    try {",
					"        const diff1 = clearEmpties(difference(e.actual, e.expected, _.isNil));",
					"        const diff2 = clearEmpties(difference(e.expected, e.actual, _.isNil));",
					"        console.log('missing from actual:', diff1);",
					"        console.log('extraneous (found in actual but not expected):', diff2);",
					"        console.log({ actual: e.actual, expected: e.expected});",
					"    } catch(ee) {",
					"        console.log(\"Error\", ee)",
					"    }",
					"    e.message = `*** See Console *** ${e.message}`;",
					"    throw new Error(e);",
					"  }",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "cpgServer",
			"value": "http://localhost:9001",
			"type": "string"
		},
		{
			"key": "contentEndpointAddress",
			"value": "http://localhost:8080/fhir",
			"type": "string"
		},
		{
			"key": "contentEndpointType",
			"value": "hl7-fhir-rest",
			"type": "string"
		},
		{
			"key": "terminologyEndpointAddress",
			"value": "http://localhost:8080/fhir",
			"type": "string"
		},
		{
			"key": "terminologyEndpointType",
			"value": "hl7-fhir-rest",
			"type": "string"
		}
	]
}