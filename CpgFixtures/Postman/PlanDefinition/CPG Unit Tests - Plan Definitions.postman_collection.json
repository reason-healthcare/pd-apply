{
	"info": {
		"_postman_id": "957a3559-18ca-4a5d-8fd0-54cf13e6fc19",
		"name": "CPG Unit Tests - Plan Definitions",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "25403373"
	},
	"item": [
		{
			"name": "PlanDefinition - CKDEducationParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"CKDEducationExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/CKDEducationRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"CKDEducationRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/CKDEducationPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Patient Education\",",
							"            \"description\": \"Provide verbal and written education on disease state at time of CKD diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"CKDEducationParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"CKDEducationPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/CKDEducationPlan\",\n        \"name\": \"CKDEducationPlan\",\n        \"title\": \"PlanDefinition CKDEducationPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"description\": \"Plan definition to provide education to a patient with newly diagnosed chronic kidney disease\",\n        \"action\": [\n          {\n            \"title\": \"CKD Patient Education\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"provide-counseling\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Provide Counseling\"\n                  }\n                ]\n              }\n            ],\n            \"description\": \"Provide verbal and written education on disease state at time of CKD diagnosis\"\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - ReportHeightWeightParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"ReportHeightWeightExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/Goal/WeightTargetGoal\",",
							"      \"resource\": {",
							"        \"resourceType\": \"Goal\",",
							"        \"id\": \"WeightTargetGoal\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-goal\"",
							"          ]",
							"        },",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"lifecycleStatus\": \"planned\",",
							"        \"description\": {",
							"          \"text\": \"Weight target\"",
							"        },",
							"        \"startCodeableConcept\": {",
							"          \"coding\": [",
							"            {",
							"              \"code\": \"32485007\",",
							"              \"system\": \"http://snomed.info/sct\",",
							"              \"display\": \"Admission to hospital\"",
							"            }",
							"          ]",
							"        }",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"ReportHeightWeightParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"ReportWeightHeightPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/ReportWeightHeightPlan\",\n        \"name\": \"ReportWeightHeightPlan\",\n        \"title\": \"PlanDefinition ReportWeightHeightPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"description\": \"Plan to report weight and height of patient upon admission\",\n        \"goal\": [\n          {\n            \"description\": {\n              \"text\": \"Weight target\"\n            },\n            \"start\": {\n              \"coding\": [\n                {\n                  \"code\": \"32485007\",\n                  \"system\": \"http://snomed.info/sct\",\n                  \"display\": \"Admission to hospital\"\n                }\n              ]\n            }\n          }\n        ],\n        \"action\": [\n          {\n            \"title\": \"Report Weight\",\n            \"description\": \"Report weight metric upon admission\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"diagnostic-testing\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Conduct Diagnostic Tests\"\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"title\": \"Report Height\",\n            \"description\": \"Report height metric upon admission\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"diagnostic-testing\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Conduct Diagnostic Tests\"\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - DischargeFollowUpPlanParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"DischargeFollowUpExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/DischargeFollowUpRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"DischargeFollowUpRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/DischargeFollowUpPlan|0.1.0\"",
							"        ],",
							"        \"extension\": [",
							"          {",
							"            \"url\": \"http://hl7.org/fhir/StructureDefinition/resource-pertainsToGoal\",",
							"            \"valueReference\": {",
							"              \"reference\": \"Goal/PatientMonitoringGoal\"",
							"            }",
							"          }",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Monitor patient\",",
							"            \"description\": \"Monitor patient post discharge\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"action\": [",
							"              {",
							"                \"title\": \"Schedule follow-up visit\",",
							"                \"code\": [",
							"                  {",
							"                    \"coding\": [",
							"                      {",
							"                        \"code\": \"monitor-and-follow-up-of-patient\",",
							"                        \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                        \"display\": \"Monitor and Follow-up of Patient\"",
							"                      }",
							"                    ]",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/Goal/PatientMonitoringGoal\",",
							"      \"resource\": {",
							"        \"resourceType\": \"Goal\",",
							"        \"id\": \"PatientMonitoringGoal\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-goal\"",
							"          ]",
							"        },",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"lifecycleStatus\": \"planned\",",
							"        \"description\": {",
							"          \"text\": \"Patient monitoring\"",
							"        },",
							"        \"startCodeableConcept\": {",
							"          \"coding\": [",
							"            {",
							"              \"code\": \"308283009\",",
							"              \"system\": \"http://snomed.info/sct\",",
							"              \"display\": \"Discharge from hospital\"",
							"            }",
							"          ]",
							"        }",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"DischargeFollowUpParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"DischargeFollowUpPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/DischargeFollowUpPlan\",\n        \"name\": \"DischargeFollowUpPlan\",\n        \"title\": \"PlanDefinition DischargeFollowUpPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"description\": \"Definition of plan to monitor patient following discharge\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"goal\": [\n          {\n            \"description\": {\n              \"text\": \"Patient monitoring\"\n            },\n            \"start\": {\n              \"coding\": [\n                {\n                  \"code\": \"308283009\",\n                  \"system\": \"http://snomed.info/sct\",\n                  \"display\": \"Discharge from hospital\"\n                }\n              ]\n            }\n          }\n        ],\n        \"action\": [\n          {\n            \"title\": \"Monitor patient\",\n            \"description\": \"Monitor patient post discharge\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"monitor-and-follow-up-of-patient\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Monitor and Follow-up of Patient\"\n                  }\n                ]\n              }\n            ],\n            \"action\": [\n              {\n                \"title\": \"Case management or referral\",\n                \"code\": [\n                  {\n                    \"coding\": [\n                      {\n                        \"code\": \"discharge-referral-of-patient\",\n                        \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                        \"display\": \"Discharge/Referral of Patient\"\n                      }\n                    ]\n                  }\n                ]\n              },\n              {\n                \"title\": \"Schedule follow-up visit\",\n                \"code\": [\n                  {\n                    \"coding\": [\n                      {\n                        \"code\": \"monitor-and-follow-up-of-patient\",\n                        \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                        \"display\": \"Monitor and Follow-up of Patient\"\n                      }\n                    ]\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - IronDeficiencyTreatmentPlanParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"IronDeficiencyTreatmentExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/IronDeficiencyTreatmentRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"IronDeficiencyTreatmentRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/IronDeficiencyTreatment|0.1.0\"",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"IronDeficiencyTreatmentParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"IronDeficiencyTreatmentPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/IronDeficiencyTreatmentPlan\",\n        \"name\": \"IronDeficiencyTreatmentPlan\",\n        \"title\": \"PlanDefinition IronDeficiencyTreatmentPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"description\": \"Definition of a plan to prescribe iron supplement if patient has diagnosis or iron deficiency anemia\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"library\": [\n          \"http://example.com/Library/IronDeficiencyTreatmentLibrary\"\n        ],\n        \"action\": [\n          {\n            \"title\": \"Iron Supplementation\",\n            \"textEquivalent\": \"Daily elemental iron should be prescribed if diagnosed with iron deficiency anemia\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"dispense-medication\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Dispense Medications\"\n                  }\n                ]\n              }\n            ],\n            \"condition\": [\n              {\n                \"kind\": \"applicability\",\n                \"expression\": {\n                  \"language\": \"text/cql-identifier\",\n                  \"expression\": \"Has Anemia\"\n                }\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - IschemicStrokeParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"IschemicStrokeExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/IschemicStrokeRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"IschemicStrokeRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/IschemicStrokePlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Ischemic Stroke Treatment\",",
							"            \"description\": \"Recommendation to administer TPA if patient had Ischemic Stroke\",",
							"            \"textEquivalent\": \"Administer TPA intravenously\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"dispense-meidcations\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Dispense Medications\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"condition\": [",
							"              {",
							"                \"kind\": \"applicability\",",
							"                \"expression\": {",
							"                  \"language\": \"text/cql-identifier\",",
							"                  \"expression\": \"Had Ischemic Stroke\"",
							"                }",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"IschemicStrokeParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"IschemicStrokePlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/IschemicStrokePlan\",\n        \"name\": \"IschemicStrokePlan\",\n        \"title\": \"PlanDefinition IschemicStrokePlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"description\": \"Definition of a plan to administer TPA if patient had ischemic stroke\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"library\": [\n          \"http://example.com/Library/IschemicStrokeLibrary\"\n        ],\n        \"action\": [\n          {\n            \"title\": \"Ischemic Stroke Treatment\",\n            \"description\": \"Recommendation to administer TPA if patient had Ischemic Stroke\",\n            \"textEquivalent\": \"Administer TPA intravenously\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"dispense-meidcations\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Dispense Medications\"\n                  }\n                ]\n              }\n            ],\n            \"condition\": [\n              {\n                \"kind\": \"applicability\",\n                \"expression\": {\n                  \"language\": \"text/cql-identifier\",\n                  \"expression\": \"Had Ischemic Stroke\"\n                }\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - AnemiaScreeningParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"AnemiaScreeningExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/AnemiaScreeningRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"AnemiaScreeningRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/AnemiaScreeningPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Order CBC Lab Panel\",",
							"            \"description\": \"Order CBC Lab Panel to screen for anemia\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"diagnostic-testing\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Conduct Diagnostic Tests\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"condition\": [",
							"              {",
							"                \"kind\": \"applicability\",",
							"                \"expression\": {",
							"                  \"language\": \"text/cql-identifier\",",
							"                  \"expression\": \"Needs CBC\"",
							"                }",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"AnemiaScreeningParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"AnemiaScreeningPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/AnemiaScreeningPlan\",\n        \"name\": \"AnemiaScreeningPlan\",\n        \"title\": \"PlanDefinition AnemiaScreeningPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"description\": \"Definition of plan to screen for iron defeciency anemia\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"library\": [\n          \"http://example.com/Library/AnemiaScreeningLibrary\"\n        ],\n        \"action\": [\n          {\n            \"title\": \"Order CBC Lab Panel\",\n            \"description\": \"Order CBC Lab Panel to screen for anemia\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"diagnostic-testing\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Conduct Diagnostic Tests\"\n                  }\n                ]\n              }\n            ],\n            \"condition\": [\n              {\n                \"kind\": \"applicability\",\n                \"expression\": {\n                  \"language\": \"text/cql-identifier\",\n                  \"expression\": \"Needs CBC\"\n                }\n              }\n            ]\n          },\n          {\n            \"title\": \"Order serum ferritin\",\n            \"description\": \"Order serum ferritin to monitor iron status\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"diagnostic-testing\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Conduct Diagnostic Tests\"\n                  }\n                ]\n              }\n            ],\n            \"condition\": [\n              {\n                \"kind\": \"applicability\",\n                \"expression\": {\n                  \"language\": \"text/cql-identifier\",\n                  \"expression\": \"Needs serum ferritin\"\n                }\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - CKDManagmentParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"CKDManagementExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/CKDManagementRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"CKDManagementRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/CKDManagementPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Education\",",
							"            \"description\": \"CKD Education at time of diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/InlineCKDEducationRequestGroup\"",
							"            }",
							"          },",
							"          {",
							"            \"title\": \"Follow Up Plan\",",
							"            \"description\": \"Schedule follow up with nephrologist\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"RequestGroup/CKDFollowUpRequestGroup\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://example.com/RequestGroup/InlineCKDEducationRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"InlineCKDEducationRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"option\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/CKDEducationPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Pateint Education\",",
							"            \"description\": \"Provide verbal and written education on disease state at time of CKD diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://example.com/RequestGroup/CKDFollowUpRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"CKDFollowUpRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"option\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/CKDFollowUpPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"CKD Pateint Education\",",
							"            \"description\": \"Provide verbal and written education on disease state at time of CKD diagnosis\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"monitor-and-follow-up-of-patient\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Monitor and Follow-up of Patient\"",
							"                  }",
							"                ]",
							"              }",
							"            ]",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"CKDManagmentParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"CKDManagementPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/CKDManagementPlan\",\n        \"name\": \"CKDManagementPlan\",\n        \"title\": \"PlanDefinition CKDManagementPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"description\": \"Management strategy for patients with newly diagnosed Chronic Kidney Disease\",\n        \"action\": [\n          {\n            \"title\": \"CKD Education\",\n            \"description\": \"CKD Education at time of diagnosis\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"provide-counseling\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Provide Counseling\"\n                  }\n                ]\n              }\n            ],\n            \"definitionCanonical\": \"http://example.com/PlanDefinition/CKDEducationPlan\"\n          },\n          {\n            \"title\": \"Follow Up Plan\",\n            \"description\": \"Schedule follow up with nephrologist\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"monitor-and-follow-up-of-patient\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Monitor and Follow-up of Patient\"\n                  }\n                ]\n              }\n            ],\n            \"definitionCanonical\": \"http://example.com/PlanDefinition/CKDFollowUpPlan\"\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - SendMessageParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"SendMessagePlanExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/SendMessageRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"SendMessageRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/SendMessagePlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Greet the patient\",",
							"            \"description\": \"Send a message with a greeting\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"alerts-reminders-education\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Alerts Reminders Education\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"CommunicationRequest/SendMessageRequest\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    },",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/CommunicationRequest/SendMessageRequest\",",
							"      \"resource\": {",
							"        \"resourceType\": \"CommunicationRequest\",",
							"        \"id\": \"SendMessageRequest\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-communicationrequest\"",
							"          ]",
							"        },",
							"        \"status\": \"draft\",",
							"        \"doNotPerform\": false,",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"requester\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"payload\": [",
							"          {",
							"            \"contentString\": \"Greeting: Hello! Alice Message: Example Activity Definition for a recommendation to send a message Practitioner: Michael\"",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"SendMessageParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"activityDefinition\",\n      \"resource\": {\n        \"resourceType\": \"ActivityDefinition\",\n        \"id\": \"SendMessageActivity\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-communicationactivity\"\n          ]\n        },\n        \"kind\": \"CommunicationRequest\",\n        \"profile\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-communicationrequest\",\n        \"intent\": \"proposal\",\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/ActivityDefinition/SendMessageActivity\",\n        \"name\": \"SendMessageActivity\",\n        \"title\": \"ActivityDefinition SendMessageActivity\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"description\": \"Example Activity Definition for a recommendation to send a message\",\n        \"code\": {\n          \"coding\": [\n            {\n              \"code\": \"send-message\",\n              \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-activity-type\",\n              \"display\": \"Send a message\"\n            }\n          ]\n        },\n        \"doNotPerform\": false,\n        \"dynamicValue\": [\n          {\n            \"path\": \"payload[0].contentString\",\n            \"expression\": {\n              \"language\": \"text/fhirpath\",\n              \"expression\": \"'Greeting: Hello! ' + %subject.name.given.first() + ' Message: ' + description + ' Practitioner: ' + %practitioner.name.given.first()\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - RegistrationParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"RegistrationExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/RegistrationRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"RegistrationRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Author1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/$cpg-computableplandefinition/RegistrationPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Registration with questionnaire\",",
							"            \"description\": \"Register patient using questionnaire\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"registration\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Registration\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"resource\": {",
							"              \"reference\": \"Questionnaire/RegistrationQuestionnaire\"",
							"            }",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"RegistrationParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"RegistrationPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/$cpg-computableplandefinition/RegistrationPlan\",\n        \"name\": \"RegistrationPlan\",\n        \"title\": \"$cpg-computableplandefinition RegistrationPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"description\": \"Definition of plan to collect information for patient registration\",\n        \"action\": [\n          {\n            \"title\": \"Registration with questionnaire\",\n            \"description\": \"Register patient using questionnaire\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"registration\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Registration\"\n                  }\n                ]\n              }\n            ],\n            \"definitionCanonical\": \"http://example.com/Questionnaire/RegistrationQuestionnaire\"\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - NeurologicalAssessmentParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"NeurologicalAssessmentExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/NeurologicalAssessmentRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"NeurologicalAssessmentRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/NeurologicalAssessmentPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Order neurological exam\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"diagnostic-testing\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Conduct Diagnostic Tests\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"description\": \"Recommend neurological screening based on risk factor of Ischemic stroke (disorder)\"",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"NeurologicalAssessmentParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"NeurologicalAssessmentPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/DiabetesScreeningPlan\",\n        \"name\": \"DiabetesScreeningPlan\",\n        \"title\": \"PlanDefinition DiabetesScreeningPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"description\": \"Definition of a plan to recommend nuerological assessment\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"library\": [\n          \"http://example.com/Library/NeurologicalAssessmentLibrary\"\n        ],\n        \"action\": [\n          {\n            \"title\": \"Order neurological exam\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"diagnostic-testing\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Conduct Diagnostic Tests\"\n                  }\n                ]\n              }\n            ],\n            \"dynamicValue\": [\n              {\n                \"path\": \"action[0].description\",\n                \"expression\": {\n                  \"language\": \"text/cql-identifier\",\n                  \"expression\": \"Neurological Impairment Risk Factors\"\n                }\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - DischargeInstructionsParameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"const expected = {",
							"  \"resourceType\": \"Bundle\",",
							"  \"id\": \"DischargeInstructionsExpected\",",
							"  \"type\": \"collection\",",
							"  \"entry\": [",
							"    {",
							"      \"fullUrl\": \"http://apply-processor/RequestGroup/DischargeInstructionsRequestGroup\",",
							"      \"resource\": {",
							"        \"resourceType\": \"RequestGroup\",",
							"        \"id\": \"DischargeInstructionsRequestGroup\",",
							"        \"meta\": {",
							"          \"profile\": [",
							"            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-strategy\"",
							"          ]",
							"        },",
							"        \"intent\": \"proposal\",",
							"        \"status\": \"draft\",",
							"        \"subject\": {",
							"          \"reference\": \"Patient/Patient1\"",
							"        },",
							"        \"author\": {",
							"          \"reference\": \"Practitioner/Practitioner1\"",
							"        },",
							"        \"encounter\": {",
							"          \"reference\": \"Encounter/Encounter1\"",
							"        },",
							"        \"instantiatesCanonical\": [",
							"          \"http://example.com/PlanDefinition/DichargeInstructionsPlan|0.1.0\"",
							"        ],",
							"        \"action\": [",
							"          {",
							"            \"title\": \"Provide discharge instructions\",",
							"            \"code\": [",
							"              {",
							"                \"coding\": [",
							"                  {",
							"                    \"code\": \"provide-counseling\",",
							"                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",",
							"                    \"display\": \"Provide Counseling\"",
							"                  }",
							"                ]",
							"              }",
							"            ],",
							"            \"description\": \"Provide discharge instructions for Alice\"",
							"          }",
							"        ]",
							"      }",
							"    }",
							"  ]",
							"}",
							"",
							"pm.test(\"PlanDefinition: CKD Education Plan $apply\", function () {",
							"    pm.response.to.have.status(200)",
							"    _.expectToDeepEqual(pm.response.json(), expected, console)",
							"})"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json+fhir",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"DischargeInstructionsParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"DichargeInstructionsPlan\",\n        \"meta\": {\n          \"profile\": [\n            \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-computableplandefinition\"\n          ]\n        },\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/DichargeInstructionsPlan\",\n        \"name\": \"DichargeInstructionsPlan\",\n        \"title\": \"PlanDefinition DichargeInstructionsPlan\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"description\": \"Definition of plan to provide patient discharge instructions\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\",\n              \"display\": \"Clinical Protocol\"\n            }\n          ]\n        },\n        \"action\": [\n          {\n            \"title\": \"Provide discharge instructions\",\n            \"code\": [\n              {\n                \"coding\": [\n                  {\n                    \"code\": \"provide-counseling\",\n                    \"system\": \"http://hl7.org/fhir/uv/cpg/CodeSystem/cpg-common-process\",\n                    \"display\": \"Provide Counseling\"\n                  }\n                ]\n              }\n            ],\n            \"dynamicValue\": [\n              {\n                \"path\": \"action[0].description\",\n                \"expression\": {\n                  \"language\": \"text/fhirpath\",\n                  \"expression\": \"action.title + ' for ' + %subject.name.given.first()\"\n                }\n              }\n            ]\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}"
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		},
		{
			"name": "PlanDefinition - CkdPathway",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resourceType\": \"Parameters\",\n  \"id\": \"CkdPathwayParameters\",\n  \"parameter\": [\n    {\n      \"name\": \"subject\",\n      \"valueString\": \"Patient/Patient1\"\n    },\n    {\n      \"name\": \"practitioner\",\n      \"valueString\": \"Practitioner/Practitioner1\"\n    },\n    {\n      \"name\": \"encounter\",\n      \"valueString\": \"Encounter/Encounter1\"\n    },\n    {\n      \"name\": \"planDefinition\",\n      \"resource\": {\n        \"resourceType\": \"PlanDefinition\",\n        \"id\": \"CkdPathway\",\n        \"extension\": [\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeCapability\",\n            \"valueCode\": \"publishable\"\n          },\n          {\n            \"url\": \"http://hl7.org/fhir/uv/cpg/StructureDefinition/cpg-knowledgeRepresentationLevel\",\n            \"valueCode\": \"structured\"\n          }\n        ],\n        \"url\": \"http://example.com/PlanDefinition/CkdPathway\",\n        \"name\": \"CkdPathway\",\n        \"title\": \"PlanDefinition CkdPathway\",\n        \"status\": \"draft\",\n        \"experimental\": true,\n        \"publisher\": \"Example\",\n        \"jurisdiction\": [\n          {\n            \"coding\": [\n              {\n                \"code\": \"001\",\n                \"system\": \"http://unstats.un.org/unsd/methods/m49/m49.htm\",\n                \"display\": \"World\"\n              }\n            ]\n          }\n        ],\n        \"version\": \"0.1.0\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"code\": \"clinical-protocol\",\n              \"system\": \"http://terminology.hl7.org/CodeSystem/plan-definition-type\"\n            }\n          ]\n        },\n        \"action\": [\n          {\n            \"title\": \"CKD Management\",\n            \"description\": \"Definition of plan for new diagnosis of CKD\",\n            \"definitionCanonical\": \"http://example.com/PlanDefinition/CKDManagementPlan\"\n          },\n          {\n            \"title\": \"Greet patient\",\n            \"description\": \"Greet patient at time of patient portal sign up\",\n            \"definitionCanonical\": \"http://example.com/PlanDefinition/SendMessagePlan\"\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"data\",\n      \"resource\": {\n        \"resourceType\": \"Bundle\",\n        \"id\": \"PatientTestBundle1\",\n        \"type\": \"collection\",\n        \"entry\": [\n          {\n            \"resource\": {\n              \"resourceType\": \"Patient\",\n              \"id\": \"Patient1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Alice\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Encounter\",\n              \"id\": \"Encounter1\",\n              \"status\": \"in-progress\",\n              \"class\": {\n                \"code\": \"AMB\",\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"participant\": [\n                {\n                  \"individual\": {\n                    \"reference\": \"Practitioner/Practitioner1\"\n                  }\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Practitioner\",\n              \"id\": \"Practitioner1\",\n              \"name\": [\n                {\n                  \"given\": [\n                    \"Michael\"\n                  ]\n                }\n              ]\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"MedicationRequest\",\n              \"id\": \"PastMedicationRequest\",\n              \"status\": \"active\",\n              \"intent\": \"order\",\n              \"authoredOn\": \"2023-01-01\",\n              \"medicationCodeableConcept\": {\n                \"text\": \"Some medication\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              }\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"DetectedIssue\",\n              \"id\": \"DetectedIssue1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"TIME\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                    \"display\": \"Time-related Detected Issue\"\n                  }\n                ]\n              },\n              \"severity\": \"high\",\n              \"patient\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"identifiedDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Condition\",\n              \"id\": \"Condition1\",\n              \"clinicalStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"active\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-clinical\"\n                  }\n                ]\n              },\n              \"verificationStatus\": {\n                \"coding\": [\n                  {\n                    \"code\": \"provisional\",\n                    \"system\": \"http://terminology.hl7.org/CodeSystem/condition-ver-status\"\n                  }\n                ]\n              },\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"problem-list-item\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/condition-category\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"coding\": [\n                  {\n                    \"code\": \"422504002\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Ischemic stroke (disorder)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"recordedDate\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Observation\",\n              \"id\": \"Inference1\",\n              \"status\": \"final\",\n              \"code\": {\n                \"text\": \"Inference\",\n                \"coding\": [\n                  {\n                    \"code\": \"448765001\",\n                    \"system\": \"http://snomed.info/sct\",\n                    \"display\": \"Unintentional weight loss (finding)\"\n                  }\n                ]\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"effectiveDateTime\": \"2023-01-01\"\n            }\n          },\n          {\n            \"resource\": {\n              \"resourceType\": \"Flag\",\n              \"id\": \"Flag1\",\n              \"status\": \"active\",\n              \"category\": [\n                {\n                  \"coding\": [\n                    {\n                      \"code\": \"admin\",\n                      \"system\": \"http://terminology.hl7.org/CodeSystem/flag-category\",\n                      \"display\": \"Administrative\"\n                    }\n                  ]\n                }\n              ],\n              \"code\": {\n                \"text\": \"Flag\"\n              },\n              \"subject\": {\n                \"reference\": \"Patient/Patient1\"\n              },\n              \"period\": {\n                \"start\": \"2023-01-01\",\n                \"end\": \"2024-01-01\"\n              }\n            }\n          }\n        ]\n      }\n    }\n  ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{cpgServer}}/PlanDefinition/$apply",
					"host": [
						"{{cpgServer}}"
					],
					"path": [
						"PlanDefinition",
						"$apply"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"/**",
					" * Delete the id and text as this can vary per request",
					" */",
					"Object.prototype.testPrepare = function testPrepare(resource) {",
					"    delete resource.id;",
					"    delete resource.text;",
					"    resource.entry.forEach(e => {",
					"        delete e.fullUrl",
					"        delete e.resource.id",
					"    })",
					"",
					"    return resource;",
					"}",
					"",
					"/**",
					" * Does a deep equal comparison, uses console.log to show diffs if fails.",
					" * ",
					" * @example",
					" * pm.test(\"My test\", function() {",
					" *   _.expectToDeepEqual(pm.response.json(), expected, console);",
					" * });",
					" */",
					"Object.prototype.expectToDeepEqual = (actual, expected, console = console) => {",
					"    try {",
					"        pm.expect(_.testPrepare(actual)).to.deep.equal(_.testPrepare(expected));",
					"    } catch (e) {",
					"        console.log({ actual: e.actual, expected: e.expected});",
					"        e.message = `*** See Console *** ${e.message}`;",
					"        throw new Error(e);",
					"    }",
					"}"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "cpgServer",
			"value": "http://localhost:9001",
			"type": "string"
		},
		{
			"key": "contentEndpointAddress",
			"value": "http://hapi.fhir.org/baseR4",
			"type": "string"
		},
		{
			"key": "contentEndpointType",
			"value": "hl7-fhir-rest",
			"type": "string"
		},
		{
			"key": "terminologyEndpointAddress",
			"value": "http://hapi.fhir.org/baseR4",
			"type": "string"
		},
		{
			"key": "terminologyEndpointType",
			"value": "hl7-fhir-rest",
			"type": "string"
		},
		{
			"key": "dataEndpointAddress",
			"value": "http://hapi.fhir.org/baseR4",
			"type": "string"
		},
		{
			"key": "dataEndpointType",
			"value": "hl7-fhir-rest",
			"type": "string"
		}
	]
}